!function($,e){$.dom=function(t){return"string"!=typeof t?t instanceof Array||t[0]&&t.length?[].slice.call(t):[t]:($.__create_dom_div__||($.__create_dom_div__=e.createElement("div")),$.__create_dom_div__.innerHTML=t,[].slice.call($.__create_dom_div__.childNodes))};$.PopPicker=$.Class.extend({init:function(t){var i=this;i.options=t||{},i.options.buttons=i.options.buttons||["取消","确定"],i.panel=$.dom('<div class="mui-poppicker">\t\t<div class="mui-poppicker-header">\t\t\t<button class="mui-btn mui-poppicker-btn-cancel">取消</button>\t\t\t<button class="mui-btn mui-btn-blue mui-poppicker-btn-ok">确定</button>\t\t\t<div class="mui-poppicker-clear"></div>\t\t</div>\t\t<div class="mui-poppicker-body">\t\t</div>\t</div>')[0],e.body.appendChild(i.panel),i.ok=i.panel.querySelector(".mui-poppicker-btn-ok"),i.cancel=i.panel.querySelector(".mui-poppicker-btn-cancel"),i.body=i.panel.querySelector(".mui-poppicker-body"),i.mask=$.createMask(),i.cancel.innerText=i.options.buttons[0],i.ok.innerText=i.options.buttons[1],i.cancel.addEventListener("tap",function(e){i.hide()},!1),i.ok.addEventListener("tap",function(e){if(i.callback){i.callback(i.getSelectedItems())!==!1&&i.hide()}},!1),i.mask[0].addEventListener("tap",function(){i.hide()},!1),i._createPicker(),i.panel.addEventListener("touchstart",function(e){e.preventDefault()},!1),i.panel.addEventListener("touchmove",function(e){e.preventDefault()},!1)},_createPicker:function(){var e=this,t=e.options.layer||1,i=100/t+"%";e.pickers=[];for(var a=1;a<=t;a++){var c=$.dom('<div class="mui-picker">\t\t<div class="mui-picker-inner">\t\t\t<div class="mui-pciker-rule mui-pciker-rule-ft"></div>\t\t\t<ul class="mui-pciker-list">\t\t\t</ul>\t\t\t<div class="mui-pciker-rule mui-pciker-rule-bg"></div>\t\t</div>\t</div>')[0];c.style.width=i,e.body.appendChild(c);var s=$(c).picker();e.pickers.push(s),c.addEventListener("change",function(t){var i=this.nextSibling;if(i&&i.picker){var a=t.detail||{},c=a.item||{};i.picker.setItems(c.children),e.waitToSetValues&&e.waitToSetValues.length>0&&i.picker.setSelectedValue(e.waitToSetValues.shift())}},!1)}},setData:function(e){var t=this;e=e||[],t.pickers[0].setItems(e)},getSelectedItems:function(){var e=this,t=[];for(var i in e.pickers){var a=e.pickers[i];t.push(a.getSelectedItem()||{})}return t},setValue:function(e){var t=this;e&&("string"==typeof e?t.waitToSetValues=[e]:e instanceof Array&&(t.waitToSetValues=e),t.pickers[0].setSelectedValue(t.waitToSetValues.shift()))},show:function(t){var i=this;i.callback=t,i.mask.show(),e.body.classList.add($.className("poppicker-active-for-page")),i.panel.classList.add($.className("active")),i.__back=$.back,$.back=function(){i.hide()}},hide:function(){var t=this;t.disposed||(t.panel.classList.remove($.className("active")),t.mask.close(),e.body.classList.remove($.className("poppicker-active-for-page")),$.back=t.__back)},dispose:function(){var e=this;e.hide(),setTimeout(function(){e.panel.parentNode.removeChild(e.panel);for(var t in e)e[t]=null,delete e[t];e.disposed=!0},300)}})}(mui,document);